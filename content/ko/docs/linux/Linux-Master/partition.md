---
title: "Partition"
linkTitle: "Partition"
date: 2020-11-16
type: docs
draft: false
weight: 3
description: >
  파티션
---

개요
----

물리적 디스크를 여러개의 논리적인 디스크 영역으로 분할하는 것을 의미한다. 분할된 파티션은 하나의 독립적인 디스크로 간주된다.

### 장점

-	하나의 디스크에 여러 OS를 설치 및 사용 가능
-	파티션 단위의 다양한 정책 설정 가능
-	사용자가 원하는 파일 시스템 구성이 가능
-	특정 파티션이 손상되어도 다른 파티션의 자료는 보존되기 때문에 안정성을 높일 수 있음
-	자료 이전 및 관리, 백업이 용이. 분할된 파티션의 경우 마운트 포인트 변경을 통해 쉽게 자료 이전 및 관리
-	부팅이 빨라지고 파일 시스템 점검 시간 단축
	-	`/boot` 파티션 분할로 부팅 속도 향상
	-	특정 파티션만 점검해서 시간 단축
-	특정 영역 데이터 증가에 따른 시스템 및 프로세스 중단을 방지

> 리눅스는 가상 메모리로 사용하는 swap 파티션을 반드시 설정해야 한다.
>
> 파티션 분할이 필요한 영역: `/`, `swap`, `/boot`, `/usr`, `/var`, `/home`, `/tmp`

종류
----

### 주 파티션

-	부팅 가능한 파티션
-	하나의 물리디스크에 최대 4개
-	확장 파티션을 사용할 경우 3개까지

### 확장 파티션

-	하나의 물리티스크에 1개만 가능

-	자료 저장은 논리 파티션에 저장

### 논리 파티션

-	확장 파티션 안에 생성됨

-	5번 이후 번호를 부여

장치명
------

### 디스크

리눅스는 모든 장치를 파일명으로 관리하므로 어떤 디스크를 사용했는지에 따라 파일 이름이 달라진다. 초기에는 x86 시스템 기반의 IDE가 사용되었다. 당시 4개의 저장장치만 연결이 가능했기 때문에 각 장치에 따라 경로가 미리 지정되어 있다.

| 연결위치         | 파일명   |
|:----------------:|:--------:|
|  Primary Master  | /dev/hda |
|  Primary Slave   | /dev/hdb |
| Secondary Master | /dev/hdc |
| Secondary Slave  | /dev/hdd |

> `S-ATA, USB, SSD`는 `/dev/sdx`에서 관리한다.

### 파티션

분할된 파티션은 디스크 장치 파일명 뒤에 숫자를 붙여서 관리한다. 일반 `IDE 방식 디스크`에는 `/dev/hda1` 형식으로 생성되고, `SCSI, S-ATA, SSD, USB메모리` 등에는 `/dev/sdb1`과 같은 형식으로 생성된다.

-	디스크 유형에 따라 `hd` 혹은 `sd`로 지정
-	디스크 우선순위에 따라 알파벳 `a`부터 표기
-	파티션 번호

### 파티션 확인

파티션 정보는 `fdisk` 명령어를 통해서 확인할 수 있다.

```bash
$ fdisk -l
```

> `fdisk`는 부팅시 새로운 파티션을 인식하기 때문에 최근 생성된 파티션은 `/proc/partitions` 파일에서 확인해야 한다.

`partprobe` 명령어를 이용해서 재부팅 없이 파티션을 재인식 시키는 방법도 존재한다.

관련기술
--------

### LVM

리눅스에서 하드디스크는 파티션으로 분할되어 공간이 할당되는데, 이후 용량을 변경하는 것이 불가능하다. LVM은 이러한 문제를 해결해주는데, 파티션의 크기 변경뿐 아니라 여러 개의 물리적 디스크를 하나처럼 사용하는 것도 가능케 한다.

#### 구성

1.	물리적 볼륨(PV): 실제 디스크에서 물리적으로 분할한 파티션
2.	볼륨 그룹(VG): 물리적 볼륨의 그룹
3.	논리적 볼륨(LV): 사용자가 필요한 만큼 할당해서 만들어지는 공간
4.	물리적 확장(PE): PV에서 나누어 사용하는 일종의 블록같은 영역

### RAID

여러 개의 하드디스크가 있을 때 동일 데이터를 다른 위치에 중복해서 저장하는 방법. OS에서는 하나의 RAID를 하나의 디스크로 인식한다. 데이터를 기록하는 방식과 에러를 체크하는 방법에 따라 다양한 형태로 존재한다.

#### 이용 목적

-	백업이 가능하고 안정적인 데이터 보존과 유지기능, 속도 향상 등
-	구성 방법도 S/W나 H/W로 구현이 가능
-	비용적 측면에서는 S/W가 우세하나 속도로는 H/W가 뛰어남

#### 사용되는 기술

1.	스트라이핑(Striping)
	-	연속된 데이터를 여러 개의 디스크에 라운드로빈 방식으로 기록
	-	읽고 쓰는 속도가 하나의 디스크에서 하는 것보다 빠름
2.	미러링(Mirroring)
	-	디스크에 에러가 발생 시 데이터 손실을 막기 위해 추가적인 장치에 중복 저장하는 기술
	-	그렇기 때문에 미러링 기술을 `결함 허용`이라고도 함
