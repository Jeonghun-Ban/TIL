---
title: "Hierarchy"
linkTitle: "Hierarchy"
date: 2020-11-16
type: docs
draft: false
weight: 3
description: >
  네트워크 계층 구조
---

1980년대 초 ISO(International Organization for Standardization)는 여러 업체가 만든 시스템을 상호 연동 가능케 하는 표준 네트워크 모델 제정의 필요성을 인식하고, 이런 요구를 수용해 OSI(Open System Interconnection) 네트워크 모델을 만들었다.

![OSI 7계층](images/2020-05-27-22-18-02.png)

물리 계층
---

시스템 간의 연결 선으로, 실제 장치를 연결하는 데 필요한 전기적, 물리적 세부 사항을 정의

### 케이블

랜(LAN) 케이블이 대표적이지만 케이블의 속도에 따라 CAT 1~6로 나뉘며 재질에 따라 구분된다. 

**케이블의 구분**

|구분|내용|
|---------------|--------------------|
|UTP(Unshielded Twisted Pair)|두 선 간의 전자기 유도를 줄이기 위해 절연의 구리선이 서로 꼬여 있다. 제품 전선과 피복만으로 구성|
|FTP(Foil Screened Twisted Pair)|알루미늄 은박이 4가닥 선을 감싸고 있다. UTP보다 절연 기능이 탁월해 공장 배선용으로 많이 사용|
|STP(Shielded Twisted Pair)|연선으로 된 케이블 겉에 외부 피복, 또는 차폐재가 추가(쉴드 처리), 차폐재가 접지 역할을 하므로 외부 노이즈를 차단하거나 전기적 신호 간섭을 줄이는 데 탁월|

일반적으로 사용하는 랜 케이블은 CAT 5(or CAT 6)인 UTP 케이블이다.

### 관련 장비

#### 리피터

네트워크를 연장하기 위한 장비로 신호 세기를 증가시키는 역할을 한다. 요즘에는 모든 네트워크 장비에 공통적으로 들어가는 기능이 되어 별도 장비로 사용하지는 않는다.

#### 더미 허브

스위치의 예전 형태로 네트워크 구조가 버스 구조를 하고 있다. 허브는 스위치와 사용 방법이 똑같으나 패킷을 보낼 때 데이터가 모든 노드에게 전달된다는 점이 다르다.

데이터 링크 계층
---

점대점(point-to-point) 간 신뢰성 있는 전송을 보장하기 위한 계층

- CRC 기반의 오류 제어와 흐름 제어가 필요
- 네트워크를 구성하는 개체들 간 데이터를 전달
- 물리 계층에서 발생할 수 있는 오류를 찾아 수정하기 위한 기능적, 절차적 수단을 제공

### MAC 주소

데이터 링크 계층을 간단히 설명하면 하드웨어 주소만으로 통신하는 계층이다. 하드웨어 주소인 MAC은 네트워크 카드에 할당되는 고유 주소로 12개의 16진수로 구성된다. 앞 6자리는 제조사 정보(OUI, Organizational Unique Identifier)이며 뒤쪽 자리는 호스트 식별자(Host Identifier)로 제조사에서 임의로 붙이는 일련번호이다.

### 네트워크 종류

데이터 링크 계층에는 이더넷 외에도 몇 가지 주요 네트워크가 존재한다.

#### X.25

ITU-T에 의해 규격화된 통신 규약으로 단말 장치(DTE, Data Terminal Equipment)와 회선종단장치(DCE, Data Circuit-terminating Equipment) 간의 상호 접속에 대해서만 규정한다.

> 회선종단장치: 네트워크를 통해 데이터를 아날로그나 디지털 신호 형태로 송수신하는 장치

#### 프레임 릴레이

디지털 전송 통로 품질의 향상에 따라 불필요한 전송 오류 제어나 흐름 제어 등 복잡한 기능을 최소화하고, 망 종단 장치에서 처리하도록 함으로써 고속 전송을 실현하는 고속 데이터 전송 기술이다. X.25 패킷 교환망의 10배까지 구현 가능

#### ATM

고속의 데이터를 53Byte 셀로 처리하는 VLSI 기술로, 실시간 영상 전송과 같은 고속 통신에 사용한다.

### 관련 장비

#### 브리지

랜과 랜을 연결하는 네트워크 장치로, 데이터 링크 계층에서 통신 선로를 따라 한 네트워크에서 그 다음 네트워크로 프레임을 복사하는 역할을 한다.

> 프레임은 L2(Layer 2, 데이터 링크 계층)에서 사용되는 데이터 전송 단위이다.

#### 스위치

기본적으로 L2에서 작동하는 스위치를 말한다. L3, L4 스위치는 L2 스위치에 상위 계층의 네트워킹 기능을 추가한 것이다. L2 스위치는 스타형 네트워크로 더미 허브의 패킷 간 충돌을 해결하는 획기적 방안이었다. 

### 스위칭

**패킷 전송 방식**
- 컷스루(cut-through)
  - 수신한 프레임의 목적지 주소를 확인하고 해당 포트로 즉시 전송
  - 지연 시간 최소화
  - 수신 패킷에 오류있을 시, 수신 장치에서 폐기
- 저장 후 전송(store & forward)
  - 완저히 프레임을 수신하여 버퍼에 보관
  - CRC 등 오류를 확인하고 정상 프레임을 전송
  - 전송 지연이 발생하지만 브리지나 라우터보다 신속
  - 속도가 다른 포트가 연결된 경우 반드시 사용해야 함
  - 최근에는 컷스루와 동시지원이 일반적
- 인텔리전트 스위칭(intelligent switching)
  - 평소에는 컷스루 방식으로 작동
  - 오류 발생시 저장 후 전송 모드로 자동 전환
  - 오류가 0이 되면 다시 컷스루로 전환
- 전이중(full-duplex)
  - 송신 포트와 수신 포트를 분리
  - 반이중 방식보다 성능이 두배
  - 충돌이 없으므로 전송거리 제한 연장 가능

**스위치 테이블**
데이터 링크 계층에서 스위치는 시스템 간의 원활한 통신을 위해 주소 테이블을 생성하고 관리

|포트|MAC주소|
|------|-----------------|
|1번 포트|                |
|2번 포트|  서버의 MAC 주소  |
|3번 포트|클라이언트의 MAC 주소|
|4번 포트|                |

> 스위치는 IP주소를 기억하지 않으며 MAC 주소만을 포트에 매칭한다.

네트워크 계층
---

여러 노드를 거칠 때마다 경로를 찾아주는 역할을 하는 계층

- 전송 계층이 요구하는 서비스 품질(QoS)을 제공하기 위한 절차적, 기능적 수단을 제공
- 라우팅, 흐름 제어, 단편화, 오류 제어 등 수행
- 라우터와 L3 스위치가 여기에 해당

### 라우터

둘 이상의 네트워크를 연결하거나 분리하는 역할을 수행

**주요 기능**
- 네트워크를 서로 연결
  - 각기 독립적으로 구성된 네트워크들을 연결
- 패킷 스위칭
  - 한 포트로 패킷을 받아서, 다른 포트로 전송
- 경로 설정
  - 패킷 교환망에서 최적 경로를 찾기 위한 라우팅 테이블을 구성
  - 이에 따라 패킷을 목적지까지 가장 빠르게 전송

### 라우팅

네트워크상에서 주소를 이용, 목적지까지 경로를 체계적으로 결정하는 경로선택 과정

- 정적 라우팅
  - 관리자 권한으로 특정 경로를 통해서만 패킷이 지날 수 있도록 설정한 것
  - 네트워크 변경사항이 발생할 때 라우팅 테이블을 수동으로 직접 고쳐줘야 함
- 동적 라우팅
  - 네트워크 연결 상태를 라우터가 스스로 파악, 최적 경로 선택
  - 네트워크 연결 형태가 변경되어도 자동으로 문제 해결

전송 계층
---

양 끝단(end-to-end)의 사용자들이 신뢰성 있는 데이터를 주고받을 수 있게 함으로, 상위 계층이 데이터 전달의 유효성이나 효율성을 고려하지 않아도 되게 함

- 시퀸스 넘버 기반의 오류 제어 방식을 사용
- 특정 연결의 유효성 제어
- `TCP`는 연결 지향 프로토콜
  - 패킷 전송이 유효한가 판단, 재전송

### port

전송 계층의 대표적인 프로토콜인 TCP는 포트(port)라는 주소를 가진다. IP가 시스템의 논리적 주소라면, 포트는 시스템에 도착한 이후 찾아갈 응용 프로그램의 주소라 할 수 있다.

- 0~65535(2^16)번까지 존재
  - 0~1023번을 잘 알려진 포트라 함(well known port)
- 출발지 포트는 사용하지 않는 임의의 포트를 할당
  - 1025~65535번 중 할당

세션 계층
---

양 끝단의 응용 프로세스가 통신을 관리하기 위한 방법을 제공

- 동시 송수신 방식, 반이중 방식, 전이중 방식의 통신
- 체크 포인팅과 유휴, 종류, 재시작 과정 등을 수행
- `TCP/IP 세션`을 만들고 없애는 책임

표현 계층
---

데이터에 대한 구조를 하나의 통일된 형식을 표현

- 응용 프로그램 계층 간의 서로 다른 표현을 상호 인식하기 위한 정보 정의
- 데이터 압축과 암호화
  - 이에 대한 정보가 헤더에 담김

응용 계층
---

사용자나 응용 프로그램 사이에 데이터 교환을 가능하게 하는 계층

- HTTP, FTP, 터미널 서비스, 메일 프로그램, 디렉토리 서비스 등
